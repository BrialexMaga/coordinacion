{% extends 'base.html' %}

{% block title %}Contactos{% endblock %}

{% load static %}
{% block content %}
<div class='container-fluid'>
    <br>
    <div class="d-flex justify-content-end">
        <a href="{% url 'export-contacts' %}" class="btn text-white fw-semibold" style="background-color: #424E5E;">
            <img src="{% static 'img/excel.png' %}" style="width: 20px; height: 20px;">
            Exportar Contactos
        </a>
    </div>
    <div>
        <br>
        <form method="GET" action="{% url 'contacts' %}">
            <div>
                <input type="text" name="code" placeholder="Buscar por código">
                <input type="text" name="name" placeholder="Buscar por nombre">
                <button class="btn text-white fw-semibold my-button-color" type="submit">Buscar</button>
            </div>
        </form>
        
        <table class="table table-striped">
            <thead>
                <th class="my-table-header">Código</th>
                <th class="my-table-header">Nombre</th>
                <th class="my-table-header">Primer Apellido</th>
                <th class="my-table-header">Segundo Apellido</th>
                <th class="my-table-header">Estatus</th>
                <th class="my-table-header">Admisión</th>
                <th class="my-table-header">Ultimo Ciclo</th>
                <th class="my-table-header">Carrera</th>
                <th class="my-table-header"></th>
                <th class="my-table-header"></th>
            </thead>
            <tbody>
                {% for student in students %}
                    <tr>
                        <td>{{ student.code }}</td>
                        <td>{{ student.name }}</td>
                        <td>{{ student.first_last_name }}</td>
                        <td>{{ student.second_last_name }}</td>
                        <td>{{ student.status }}</td>
                        <td>{{ student.admission_cycle }} </td>
                        <td>{{ student.last_cycle }} </td>
                        <td>{{ student.idCareer }} </td>
                        <td><a class="btn text-white fw-semibold" style="background-color: #424E5E;" href="{% url 'show-contact' student.idStudent %}">Ver Contacto</a></td>
                        <td><a class="btn text-white fw-semibold" style="background-color: #424E5E;" href="{% url 'contact-form' student.idStudent %}">Crear/Actualizar Contacto</a></td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}